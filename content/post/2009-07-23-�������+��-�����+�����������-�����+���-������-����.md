---
title: Скрипт обслуживания таблиц базы данных при запуске
author: wel
type: post
date: 2009-07-23T10:11:00+00:00
url: /billing/скрипт-обслуживания-таблиц-базы-данн
short-url:
  - http://bit.ly/fxPygs
wp-syntax-cache-content:
  - |
    a:2:{i:1;s:17143:"
    <div class="wp_syntax" style="position:relative;"><table><tr><td class="line_numbers"><pre>1
    2
    3
    4
    5
    6
    7
    8
    9
    10
    11
    12
    13
    14
    15
    16
    17
    18
    19
    20
    21
    22
    23
    24
    25
    26
    27
    28
    29
    30
    31
    32
    33
    34
    35
    36
    37
    38
    39
    40
    41
    42
    43
    44
    45
    46
    47
    48
    49
    50
    51
    52
    53
    54
    55
    56
    57
    58
    59
    60
    61
    62
    63
    64
    65
    66
    67
    68
    69
    70
    71
    72
    73
    74
    75
    76
    77
    78
    79
    80
    81
    82
    83
    84
    </pre></td><td class="code"><pre class="cpp" style="font-family:monospace;"><span style="color: #339900;">#include &lt;QtCore&gt;</span>
    <span style="color: #339900;">#include &lt;QCoreApplication&gt;</span>
    <span style="color: #339900;">#include &lt;QtSql&gt;</span>
    <span style="color: #339900;">#include &lt;iostream&gt;</span>
    <span style="color: #339900;">#include &lt;cstdlib&gt;</span>
    <span style="color: #339900;">#include &lt;iomanip&gt;</span>
    <span style="color: #339900;">#include &lt;stdio.h&gt;</span>
    <span style="color: #339900;">#include &lt;stdlib.h&gt;</span>
    <span style="color: #339900;">#include &lt;string.h&gt;</span>
    <span style="color: #339900;">#include &lt;time.h&gt;</span>
    <span style="color: #0000ff;">using</span> <span style="color: #0000ff;">namespace</span> std<span style="color: #008080;">;</span>
    &nbsp;
    &nbsp;
    <span style="color: #339900;">#define SQLDRIVER &quot;QMYSQL&quot;</span>
    <span style="color: #339900;">#define HOST &quot;10.1.1.1&quot;</span>
    <span style="color: #339900;">#define DBNAME &quot;freenibs&quot;</span>
    <span style="color: #339900;">#define USER &quot;freenibs&quot;</span>
    <span style="color: #339900;">#define PASSWORD &quot;freenibs&quot;</span>
    &nbsp;
    <span style="color: #0000ff;">int</span> main<span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span> argc, <span style="color: #0000ff;">char</span> <span style="color: #000040;">*</span>argv<span style="color: #008000;">&#91;</span><span style="color: #008000;">&#93;</span><span style="color: #008000;">&#41;</span>
    <span style="color: #008000;">&#123;</span>
        QCoreApplication a<span style="color: #008000;">&#40;</span>argc, argv<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
    &nbsp;
        QTextCodec <span style="color: #000040;">*</span>codec <span style="color: #000080;">=</span> QTextCodec<span style="color: #008080;">::</span><span style="color: #007788;">codecForName</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;CP1251&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        QTextCodec<span style="color: #008080;">::</span><span style="color: #007788;">setCodecForTr</span><span style="color: #008000;">&#40;</span>codec<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        QTextCodec<span style="color: #008080;">::</span><span style="color: #007788;">setCodecForCStrings</span><span style="color: #008000;">&#40;</span>codec<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
    &nbsp;
        QSqlDatabase db <span style="color: #000080;">=</span> QSqlDatabase<span style="color: #008080;">::</span><span style="color: #007788;">addDatabase</span><span style="color: #008000;">&#40;</span>SQLDRIVER<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
    &nbsp;
        <span style="color: #0000ff;">if</span><span style="color: #008000;">&#40;</span> <span style="color: #000040;">!</span>db.<span style="color: #007788;">isDriverAvailable</span><span style="color: #008000;">&#40;</span>SQLDRIVER<span style="color: #008000;">&#41;</span><span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
    &nbsp;
        <span style="color: #008000;">&#125;</span>
    &nbsp;
    &nbsp;
        db.<span style="color: #007788;">setHostName</span><span style="color: #008000;">&#40;</span>HOST<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        db.<span style="color: #007788;">setDatabaseName</span><span style="color: #008000;">&#40;</span>DBNAME<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        db.<span style="color: #007788;">setUserName</span><span style="color: #008000;">&#40;</span>USER<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        db.<span style="color: #007788;">setPassword</span><span style="color: #008000;">&#40;</span>PASSWORD<span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        <span style="color: #666666;">//db.setPort(3306);</span>
        <span style="color: #0000ff;">bool</span> ok<span style="color: #000080;">=</span>db.<span style="color: #007788;">open</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        <span style="color: #0000ff;">if</span><span style="color: #008000;">&#40;</span>ok<span style="color: #000040;">!</span><span style="color: #000080;">=</span><span style="color: #0000ff;">true</span><span style="color: #008000;">&#41;</span><span style="color: #008000;">&#123;</span>
            std<span style="color: #008080;">::</span><span style="color: #0000dd;">cout</span><span style="color: #000080;">&lt;&lt;</span><span style="color: #FF0000;">&quot;unable connec't&quot;</span><span style="color: #008080;">;</span>
            <span style="color: #0000dd;">exit</span><span style="color: #008000;">&#40;</span><span style="color: #0000dd;">1</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        <span style="color: #008000;">&#125;</span>
        <span style="color: #666666;">// QString exec_this;</span>
    &nbsp;
        QVector<span style="color: #000080;">&lt;</span>QString<span style="color: #000080;">&gt;</span> tables<span style="color: #008000;">&#40;</span><span style="color: #0000dd;">0</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`actions`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`adress`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`arpwatch`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`balcklist`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`client_problem`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`holidays`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`packets`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`pipes`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`prev`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`prices`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`smtp`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`smtp_black`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`smtp_log`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`system`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`updown`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`users`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`zakaz`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
        tables.<span style="color: #007788;">append</span><span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;`zakaz_history`&quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
    &nbsp;
        <span style="color: #0000ff;">for</span><span style="color: #008000;">&#40;</span><span style="color: #0000ff;">int</span> i<span style="color: #000080;">=</span><span style="color: #0000dd;">0</span><span style="color: #008080;">;</span>i<span style="color: #000080;">&lt;</span>tables.<span style="color: #007788;">size</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span><span style="color: #000040;">++</span>i<span style="color: #008000;">&#41;</span>
        <span style="color: #008000;">&#123;</span>
                QSqlQuery query<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;CHECK TABLE &quot;</span><span style="color: #000040;">+</span>tables.<span style="color: #007788;">at</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #000040;">+</span><span style="color: #FF0000;">&quot; &quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                query.<span style="color: #007788;">clear</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                QSqlQuery query1<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;ANALYZE TABLE &quot;</span><span style="color: #000040;">+</span>tables.<span style="color: #007788;">at</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #000040;">+</span><span style="color: #FF0000;">&quot; &quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                query1.<span style="color: #007788;">clear</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                QSqlQuery query2<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;REPAIR TABLE &quot;</span><span style="color: #000040;">+</span>tables.<span style="color: #007788;">at</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #000040;">+</span><span style="color: #FF0000;">&quot; &quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                query2.<span style="color: #007788;">clear</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                QSqlQuery query3<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;OPTIMIZE TABLE &quot;</span><span style="color: #000040;">+</span>tables.<span style="color: #007788;">at</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #000040;">+</span><span style="color: #FF0000;">&quot; &quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                query3.<span style="color: #007788;">clear</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                QSqlQuery query4<span style="color: #008000;">&#40;</span><span style="color: #FF0000;">&quot;FLUSH TABLE &quot;</span><span style="color: #000040;">+</span>tables.<span style="color: #007788;">at</span><span style="color: #008000;">&#40;</span>i<span style="color: #008000;">&#41;</span><span style="color: #000040;">+</span><span style="color: #FF0000;">&quot; &quot;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                query4.<span style="color: #007788;">clear</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
                <span style="color: #666666;">//qDebug()&lt;&lt;query.lastError()&lt;&lt;endl;</span>
         <span style="color: #008000;">&#125;</span>
         db.<span style="color: #007788;">close</span><span style="color: #008000;">&#40;</span><span style="color: #008000;">&#41;</span><span style="color: #008080;">;</span>
    <span style="color: #666666;">//    return a.exec();</span>
    <span style="color: #008000;">&#125;</span></pre></td></tr></table><p class="theCode" style="display:none;">#include &lt;QtCore&gt;
    #include &lt;QCoreApplication&gt;
    #include &lt;QtSql&gt;
    #include &lt;iostream&gt;
    #include &lt;cstdlib&gt;
    #include &lt;iomanip&gt;
    #include &lt;stdio.h&gt;
    #include &lt;stdlib.h&gt;
    #include &lt;string.h&gt;
    #include &lt;time.h&gt;
    using namespace std;
    
    
    #define SQLDRIVER &quot;QMYSQL&quot;
    #define HOST &quot;10.1.1.1&quot;
    #define DBNAME &quot;freenibs&quot;
    #define USER &quot;freenibs&quot;
    #define PASSWORD &quot;freenibs&quot;
    
    int main(int argc, char *argv[])
    {
        QCoreApplication a(argc, argv);
    
        QTextCodec *codec = QTextCodec::codecForName(&quot;CP1251&quot;);
        QTextCodec::setCodecForTr(codec);
        QTextCodec::setCodecForCStrings(codec);
    
        QSqlDatabase db = QSqlDatabase::addDatabase(SQLDRIVER);
    
        if( !db.isDriverAvailable(SQLDRIVER))
        {
    
        }
    
    
        db.setHostName(HOST);
        db.setDatabaseName(DBNAME);
        db.setUserName(USER);
        db.setPassword(PASSWORD);
        //db.setPort(3306);
        bool ok=db.open();
        if(ok!=true){
            std::cout&lt;&lt;&quot;unable connec't&quot;;
            exit(1);
        }
        // QString exec_this;
    
        QVector&lt;QString&gt; tables(0);
        tables.append(&quot;`actions`&quot;);
        tables.append(&quot;`adress`&quot;);
        tables.append(&quot;`arpwatch`&quot;);
        tables.append(&quot;`balcklist`&quot;);
        tables.append(&quot;`client_problem`&quot;);
        tables.append(&quot;`holidays`&quot;);
        tables.append(&quot;`packets`&quot;);
        tables.append(&quot;`pipes`&quot;);
        tables.append(&quot;`prev`&quot;);
        tables.append(&quot;`prices`&quot;);
        tables.append(&quot;`smtp`&quot;);
        tables.append(&quot;`smtp_black`&quot;);
        tables.append(&quot;`smtp_log`&quot;);
        tables.append(&quot;`system`&quot;);
        tables.append(&quot;`updown`&quot;);
        tables.append(&quot;`users`&quot;);
        tables.append(&quot;`zakaz`&quot;);
        tables.append(&quot;`zakaz_history`&quot;);
    
        for(int i=0;i&lt;tables.size();++i)
        {
                QSqlQuery query(&quot;CHECK TABLE &quot;+tables.at(i)+&quot; &quot;);
                query.clear();
                QSqlQuery query1(&quot;ANALYZE TABLE &quot;+tables.at(i)+&quot; &quot;);
                query1.clear();
                QSqlQuery query2(&quot;REPAIR TABLE &quot;+tables.at(i)+&quot; &quot;);
                query2.clear();
                QSqlQuery query3(&quot;OPTIMIZE TABLE &quot;+tables.at(i)+&quot; &quot;);
                query3.clear();
                QSqlQuery query4(&quot;FLUSH TABLE &quot;+tables.at(i)+&quot; &quot;);
                query4.clear();
                //qDebug()&lt;&lt;query.lastError()&lt;&lt;endl;
         }
         db.close();
    //    return a.exec();
    }</p></div>
    ";i:2;s:16564:"
    <div class="wp_syntax" style="position:relative;"><table><tr><td class="line_numbers"><pre>1
    2
    3
    4
    5
    6
    7
    8
    9
    10
    11
    12
    13
    14
    15
    16
    17
    18
    19
    20
    21
    22
    23
    24
    25
    26
    27
    28
    29
    30
    31
    32
    33
    34
    35
    36
    37
    38
    39
    40
    41
    42
    43
    44
    45
    46
    47
    48
    49
    50
    51
    52
    53
    54
    55
    56
    57
    58
    59
    60
    61
    62
    63
    64
    65
    66
    67
    68
    69
    70
    71
    72
    73
    74
    75
    76
    77
    78
    79
    80
    81
    82
    83
    84
    85
    86
    87
    88
    89
    90
    91
    92
    93
    94
    95
    96
    97
    98
    99
    100
    101
    102
    103
    104
    105
    106
    107
    108
    109
    110
    111
    112
    113
    114
    115
    116
    117
    118
    119
    120
    121
    122
    123
    124
    125
    126
    127
    128
    129
    130
    131
    132
    133
    134
    135
    136
    137
    138
    139
    140
    141
    142
    143
    144
    145
    146
    147
    148
    149
    150
    151
    152
    153
    154
    155
    156
    157
    158
    159
    160
    161
    162
    163
    164
    165
    166
    167
    168
    169
    170
    171
    172
    173
    174
    175
    176
    177
    178
    179
    180
    181
    182
    183
    184
    185
    186
    187
    188
    </pre></td><td class="code"><pre class="makefile" style="font-family:monospace;">#############################################################################
    # Makefile for building: freenibs-start
    # Generated by qmake (2.01a) (Qt 4.4.3) on: Sun Mar 15 02:24:54 2009
    # Project:  pro.pro
    # Template: app
    # Command: /usr/local/bin/qmake-qt4 -unix -o Makefile pro.pro
    #############################################################################
    &nbsp;
    ####### Compiler, tools and options
    &nbsp;
    CC            = cc
    CXX           = c++
    DEFINES       = -DQT_NO_DEBUG -DQT_SQL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
    CFLAGS        = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
    CXXFLAGS      = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
    INCPATH       = -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4 -I. -I. -I/usr/local/include
    LINK          = c++
    LFLAGS        = -pthread -Wl,-rpath,/usr/local/lib/qt4
    LIBS          = $(SUBLIBS)  -L/usr/local/lib -L/usr/local/lib/qt4 -lQtSql -L/usr/local/lib/qt4 -L/usr/local/lib -pthread -pthread -lQtGui -pthread -lpng -lSM -lICE -pthread -pthread -lXi -lXrender -lXrandr -lfreetype -lfontconfig -lXext -lX11 -lQtCore -lz -lm -pthread -lgthread-2.0 -lglib-2.0 -liconv
    AR            = ar cqs
    RANLIB        =
    QMAKE         = /usr/local/bin/qmake-qt4
    TAR           = tar -cf
    COMPRESS      = gzip -9f
    COPY          = cp -f
    SED           = sed
    COPY_FILE     = $(COPY)
    COPY_DIR      = $(COPY) -R
    INSTALL_FILE  = $(COPY_FILE)
    INSTALL_DIR   = $(COPY_DIR)
    INSTALL_PROGRAM = $(COPY_FILE)
    DEL_FILE      = rm -f
    SYMLINK       = ln -sf
    DEL_DIR       = rmdir
    MOVE          = mv -f
    CHK_DIR_EXISTS= test -d
    MKDIR         = mkdir -p
    &nbsp;
    ####### Output directory
    &nbsp;
    OBJECTS_DIR   = ./
    &nbsp;
    ####### Files
    &nbsp;
    SOURCES       = main.cpp
    OBJECTS       = main.o
    DIST          = /usr/local/share/qt4/mkspecs/common/unix.conf \
                    /usr/local/share/qt4/mkspecs/qconfig.pri \
                    /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                    /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                    /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                    /usr/local/share/qt4/mkspecs/features/release.prf \
                    /usr/local/share/qt4/mkspecs/features/default_post.prf \
                    /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                    /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                    /usr/local/share/qt4/mkspecs/features/qt.prf \
                    /usr/local/share/qt4/mkspecs/features/moc.prf \
                    /usr/local/share/qt4/mkspecs/features/resources.prf \
                    /usr/local/share/qt4/mkspecs/features/uic.prf \
                    /usr/local/share/qt4/mkspecs/features/yacc.prf \
                    /usr/local/share/qt4/mkspecs/features/lex.prf \
                    pro.pro
    QMAKE_TARGET  = freenibs-start
    DESTDIR       =
    TARGET        = freenibs-start
    &nbsp;
    first: all
    ####### Implicit rules
    &nbsp;
    .SUFFIXES: .o .c .cpp .cc .cxx .C
    &nbsp;
    .cpp.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    &nbsp;
    .cc.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    &nbsp;
    .cxx.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    &nbsp;
    .C.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    &nbsp;
    .c.o:
            $(CC) -c $(CFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    &nbsp;
    ####### Build rules
    &nbsp;
    all: Makefile $(TARGET)
    &nbsp;
    $(TARGET):  $(OBJECTS)
            $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)
    &nbsp;
    Makefile: pro.pro  /usr/local/share/qt4/mkspecs/freebsd-g++/qmake.conf /usr/local/share/qt4/mkspecs/common/unix.conf \
                    /usr/local/share/qt4/mkspecs/qconfig.pri \
                    /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                    /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                    /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                    /usr/local/share/qt4/mkspecs/features/release.prf \
                    /usr/local/share/qt4/mkspecs/features/default_post.prf \
                    /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                    /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                    /usr/local/share/qt4/mkspecs/features/qt.prf \
                    /usr/local/share/qt4/mkspecs/features/moc.prf \
                    /usr/local/share/qt4/mkspecs/features/resources.prf \
                    /usr/local/share/qt4/mkspecs/features/uic.prf \
                    /usr/local/share/qt4/mkspecs/features/yacc.prf \
                    /usr/local/share/qt4/mkspecs/features/lex.prf \
                    /usr/local/lib/qt4/libQtSql.prl \
                    /usr/local/lib/qt4/libQtCore.prl \
                    /usr/local/lib/qt4/libQtGui.prl
            $(QMAKE) -unix -o Makefile pro.pro
    /usr/local/share/qt4/mkspecs/common/unix.conf:
    /usr/local/share/qt4/mkspecs/qconfig.pri:
    /usr/local/share/qt4/mkspecs/features/qt_functions.prf:
    /usr/local/share/qt4/mkspecs/features/qt_config.prf:
    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf:
    /usr/local/share/qt4/mkspecs/features/default_pre.prf:
    /usr/local/share/qt4/mkspecs/features/release.prf:
    /usr/local/share/qt4/mkspecs/features/default_post.prf:
    /usr/local/share/qt4/mkspecs/features/unix/thread.prf:
    /usr/local/share/qt4/mkspecs/features/warn_on.prf:
    /usr/local/share/qt4/mkspecs/features/qt.prf:
    /usr/local/share/qt4/mkspecs/features/moc.prf:
    /usr/local/share/qt4/mkspecs/features/resources.prf:
    /usr/local/share/qt4/mkspecs/features/uic.prf:
    /usr/local/share/qt4/mkspecs/features/yacc.prf:
    /usr/local/share/qt4/mkspecs/features/lex.prf:
    /usr/local/lib/qt4/libQtSql.prl:
    /usr/local/lib/qt4/libQtCore.prl:
    /usr/local/lib/qt4/libQtGui.prl:
    qmake:  FORCE
            @$(QMAKE) -unix -o Makefile pro.pro
    &nbsp;
    dist:
            @$(CHK_DIR_EXISTS) .tmp/freenibs-start1.0.0 || $(MKDIR) .tmp/freenibs-start1.0.0
            $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/freenibs-start1.0.0/ &amp;&amp; $(COPY_FILE) --parents main.cpp .tmp/freenibs-start1.0.0/ &amp;&amp; (cd `dirname .tmp/freenibs-start1.0.0` &amp;&amp; $(TAR) freenibs-start1.0.0.tar freenibs-start1.0.0 &amp;&amp; $(COMPRESS) freenibs-start1.0.0.tar) &amp;&amp; $(MOVE) `dirname .tmp/freenibs-start1.0.0`/freenibs-start1.0.0.tar.gz . &amp;&amp; $(DEL_FILE) -r .tmp/freenibs-start1.0.0
    &nbsp;
    &nbsp;
    clean:compiler_clean
            -$(DEL_FILE) $(OBJECTS)
            -$(DEL_FILE) *~ core *.core
    &nbsp;
    &nbsp;
    ####### Sub-libraries
    &nbsp;
    distclean: clean
            -$(DEL_FILE) $(TARGET)
            -$(DEL_FILE) Makefile
    &nbsp;
    &nbsp;
    mocclean: compiler_moc_header_clean compiler_moc_source_clean
    &nbsp;
    mocables: compiler_moc_header_make_all compiler_moc_source_make_all
    &nbsp;
    compiler_moc_header_make_all:
    compiler_moc_header_clean:
    compiler_rcc_make_all:
    compiler_rcc_clean:
    compiler_image_collection_make_all: qmake_image_collection.cpp
    compiler_image_collection_clean:
            -$(DEL_FILE) qmake_image_collection.cpp
    compiler_moc_source_make_all:
    compiler_moc_source_clean:
    compiler_uic_make_all:
    compiler_uic_clean:
    compiler_yacc_decl_make_all:
    compiler_yacc_decl_clean:
    compiler_yacc_impl_make_all:
    compiler_yacc_impl_clean:
    compiler_lex_make_all:
    compiler_lex_clean:
    compiler_clean:
    &nbsp;
    ####### Compile
    &nbsp;
    main.o: main.cpp
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o main.cpp
    &nbsp;
    ####### Install
    &nbsp;
    install:   FORCE
    &nbsp;
    uninstall:   FORCE
    &nbsp;
    FORCE:</pre></td></tr></table><p class="theCode" style="display:none;">#############################################################################
    # Makefile for building: freenibs-start
    # Generated by qmake (2.01a) (Qt 4.4.3) on: Sun Mar 15 02:24:54 2009
    # Project:  pro.pro
    # Template: app
    # Command: /usr/local/bin/qmake-qt4 -unix -o Makefile pro.pro
    #############################################################################
    
    ####### Compiler, tools and options
    
    CC            = cc
    CXX           = c++
    DEFINES       = -DQT_NO_DEBUG -DQT_SQL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
    CFLAGS        = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
    CXXFLAGS      = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
    INCPATH       = -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4 -I. -I. -I/usr/local/include
    LINK          = c++
    LFLAGS        = -pthread -Wl,-rpath,/usr/local/lib/qt4
    LIBS          = $(SUBLIBS)  -L/usr/local/lib -L/usr/local/lib/qt4 -lQtSql -L/usr/local/lib/qt4 -L/usr/local/lib -pthread -pthread -lQtGui -pthread -lpng -lSM -lICE -pthread -pthread -lXi -lXrender -lXrandr -lfreetype -lfontconfig -lXext -lX11 -lQtCore -lz -lm -pthread -lgthread-2.0 -lglib-2.0 -liconv
    AR            = ar cqs
    RANLIB        =
    QMAKE         = /usr/local/bin/qmake-qt4
    TAR           = tar -cf
    COMPRESS      = gzip -9f
    COPY          = cp -f
    SED           = sed
    COPY_FILE     = $(COPY)
    COPY_DIR      = $(COPY) -R
    INSTALL_FILE  = $(COPY_FILE)
    INSTALL_DIR   = $(COPY_DIR)
    INSTALL_PROGRAM = $(COPY_FILE)
    DEL_FILE      = rm -f
    SYMLINK       = ln -sf
    DEL_DIR       = rmdir
    MOVE          = mv -f
    CHK_DIR_EXISTS= test -d
    MKDIR         = mkdir -p
    
    ####### Output directory
    
    OBJECTS_DIR   = ./
    
    ####### Files
    
    SOURCES       = main.cpp
    OBJECTS       = main.o
    DIST          = /usr/local/share/qt4/mkspecs/common/unix.conf \
                    /usr/local/share/qt4/mkspecs/qconfig.pri \
                    /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                    /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                    /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                    /usr/local/share/qt4/mkspecs/features/release.prf \
                    /usr/local/share/qt4/mkspecs/features/default_post.prf \
                    /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                    /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                    /usr/local/share/qt4/mkspecs/features/qt.prf \
                    /usr/local/share/qt4/mkspecs/features/moc.prf \
                    /usr/local/share/qt4/mkspecs/features/resources.prf \
                    /usr/local/share/qt4/mkspecs/features/uic.prf \
                    /usr/local/share/qt4/mkspecs/features/yacc.prf \
                    /usr/local/share/qt4/mkspecs/features/lex.prf \
                    pro.pro
    QMAKE_TARGET  = freenibs-start
    DESTDIR       =
    TARGET        = freenibs-start
    
    first: all
    ####### Implicit rules
    
    .SUFFIXES: .o .c .cpp .cc .cxx .C
    
    .cpp.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    
    .cc.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    
    .cxx.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    
    .C.o:
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    
    .c.o:
            $(CC) -c $(CFLAGS) $(INCPATH) -o &quot;$@&quot; &quot;$&lt;&quot;
    
    ####### Build rules
    
    all: Makefile $(TARGET)
    
    $(TARGET):  $(OBJECTS)
            $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)
    
    Makefile: pro.pro  /usr/local/share/qt4/mkspecs/freebsd-g++/qmake.conf /usr/local/share/qt4/mkspecs/common/unix.conf \
                    /usr/local/share/qt4/mkspecs/qconfig.pri \
                    /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                    /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                    /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                    /usr/local/share/qt4/mkspecs/features/release.prf \
                    /usr/local/share/qt4/mkspecs/features/default_post.prf \
                    /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                    /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                    /usr/local/share/qt4/mkspecs/features/qt.prf \
                    /usr/local/share/qt4/mkspecs/features/moc.prf \
                    /usr/local/share/qt4/mkspecs/features/resources.prf \
                    /usr/local/share/qt4/mkspecs/features/uic.prf \
                    /usr/local/share/qt4/mkspecs/features/yacc.prf \
                    /usr/local/share/qt4/mkspecs/features/lex.prf \
                    /usr/local/lib/qt4/libQtSql.prl \
                    /usr/local/lib/qt4/libQtCore.prl \
                    /usr/local/lib/qt4/libQtGui.prl
            $(QMAKE) -unix -o Makefile pro.pro
    /usr/local/share/qt4/mkspecs/common/unix.conf:
    /usr/local/share/qt4/mkspecs/qconfig.pri:
    /usr/local/share/qt4/mkspecs/features/qt_functions.prf:
    /usr/local/share/qt4/mkspecs/features/qt_config.prf:
    /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf:
    /usr/local/share/qt4/mkspecs/features/default_pre.prf:
    /usr/local/share/qt4/mkspecs/features/release.prf:
    /usr/local/share/qt4/mkspecs/features/default_post.prf:
    /usr/local/share/qt4/mkspecs/features/unix/thread.prf:
    /usr/local/share/qt4/mkspecs/features/warn_on.prf:
    /usr/local/share/qt4/mkspecs/features/qt.prf:
    /usr/local/share/qt4/mkspecs/features/moc.prf:
    /usr/local/share/qt4/mkspecs/features/resources.prf:
    /usr/local/share/qt4/mkspecs/features/uic.prf:
    /usr/local/share/qt4/mkspecs/features/yacc.prf:
    /usr/local/share/qt4/mkspecs/features/lex.prf:
    /usr/local/lib/qt4/libQtSql.prl:
    /usr/local/lib/qt4/libQtCore.prl:
    /usr/local/lib/qt4/libQtGui.prl:
    qmake:  FORCE
            @$(QMAKE) -unix -o Makefile pro.pro
    
    dist:
            @$(CHK_DIR_EXISTS) .tmp/freenibs-start1.0.0 || $(MKDIR) .tmp/freenibs-start1.0.0
            $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/freenibs-start1.0.0/ &amp;&amp; $(COPY_FILE) --parents main.cpp .tmp/freenibs-start1.0.0/ &amp;&amp; (cd `dirname .tmp/freenibs-start1.0.0` &amp;&amp; $(TAR) freenibs-start1.0.0.tar freenibs-start1.0.0 &amp;&amp; $(COMPRESS) freenibs-start1.0.0.tar) &amp;&amp; $(MOVE) `dirname .tmp/freenibs-start1.0.0`/freenibs-start1.0.0.tar.gz . &amp;&amp; $(DEL_FILE) -r .tmp/freenibs-start1.0.0
    
    
    clean:compiler_clean
            -$(DEL_FILE) $(OBJECTS)
            -$(DEL_FILE) *~ core *.core
    
    
    ####### Sub-libraries
    
    distclean: clean
            -$(DEL_FILE) $(TARGET)
            -$(DEL_FILE) Makefile
    
    
    mocclean: compiler_moc_header_clean compiler_moc_source_clean
    
    mocables: compiler_moc_header_make_all compiler_moc_source_make_all
    
    compiler_moc_header_make_all:
    compiler_moc_header_clean:
    compiler_rcc_make_all:
    compiler_rcc_clean:
    compiler_image_collection_make_all: qmake_image_collection.cpp
    compiler_image_collection_clean:
            -$(DEL_FILE) qmake_image_collection.cpp
    compiler_moc_source_make_all:
    compiler_moc_source_clean:
    compiler_uic_make_all:
    compiler_uic_clean:
    compiler_yacc_decl_make_all:
    compiler_yacc_decl_clean:
    compiler_yacc_impl_make_all:
    compiler_yacc_impl_clean:
    compiler_lex_make_all:
    compiler_lex_clean:
    compiler_clean:
    
    ####### Compile
    
    main.o: main.cpp
            $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o main.cpp
    
    ####### Install
    
    install:   FORCE
    
    uninstall:   FORCE
    
    FORCE:</p></div>
    ";}
categories:
  - billing
  - дополнения
tags:
  - mysql
  - table
  - обслуживание

---
Скрипт обслуживания таблиц базы данных при запуске компьютера.
  
Идея состоит в том, что не нужно париться в моменты рестарта сервера, коннектиться к нему и восстанавливать таблицы.
  
Конечно это случалось редко, но всё же случалось и тогда такой скрипт помогал.
  
Плюс не сомненно в том, что таблицы чекаются, оптимизируются при старте &#8212; это Мне помогнало в freenibs&#8217;е увеличивать скорость выборки)))
  
main.cpp:
  
<!--more-->

<pre lang="cpp" line="1">#include &lt;QtCore>
#include &lt;QCoreApplication>
#include &lt;QtSql>
#include &lt;iostream>
#include &lt;cstdlib>
#include &lt;iomanip>
#include &lt;stdio.h>
#include &lt;stdlib.h>
#include &lt;string.h>
#include &lt;time.h>
using namespace std;


#define SQLDRIVER "QMYSQL"
#define HOST "10.1.1.1"
#define DBNAME "freenibs"
#define USER "freenibs"
#define PASSWORD "freenibs"

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    QTextCodec *codec = QTextCodec::codecForName("CP1251");
    QTextCodec::setCodecForTr(codec);
    QTextCodec::setCodecForCStrings(codec);

    QSqlDatabase db = QSqlDatabase::addDatabase(SQLDRIVER);

    if( !db.isDriverAvailable(SQLDRIVER))
    {

    }


    db.setHostName(HOST);
    db.setDatabaseName(DBNAME);
    db.setUserName(USER);
    db.setPassword(PASSWORD);
    //db.setPort(3306);
    bool ok=db.open();
    if(ok!=true){
        std::cout&lt;&lt;"unable connec't";
        exit(1);
    }
    // QString exec_this;

    QVector&lt;QString> tables(0);
    tables.append("`actions`");
    tables.append("`adress`");
    tables.append("`arpwatch`");
    tables.append("`balcklist`");
    tables.append("`client_problem`");
    tables.append("`holidays`");
    tables.append("`packets`");
    tables.append("`pipes`");
    tables.append("`prev`");
    tables.append("`prices`");
    tables.append("`smtp`");
    tables.append("`smtp_black`");
    tables.append("`smtp_log`");
    tables.append("`system`");
    tables.append("`updown`");
    tables.append("`users`");
    tables.append("`zakaz`");
    tables.append("`zakaz_history`");

    for(int i=0;i&lt;tables.size();++i)
    {
            QSqlQuery query("CHECK TABLE "+tables.at(i)+" ");
            query.clear();
            QSqlQuery query1("ANALYZE TABLE "+tables.at(i)+" ");
            query1.clear();
            QSqlQuery query2("REPAIR TABLE "+tables.at(i)+" ");
            query2.clear();
            QSqlQuery query3("OPTIMIZE TABLE "+tables.at(i)+" ");
            query3.clear();
            QSqlQuery query4("FLUSH TABLE "+tables.at(i)+" ");
            query4.clear();
            //qDebug()&lt;&lt;query.lastError()&lt;&lt;endl;
     }
     db.close();
//    return a.exec();
}
</pre>

Makefile:

<pre lang="makefile" line="1">#############################################################################
# Makefile for building: freenibs-start
# Generated by qmake (2.01a) (Qt 4.4.3) on: Sun Mar 15 02:24:54 2009
# Project:  pro.pro
# Template: app
# Command: /usr/local/bin/qmake-qt4 -unix -o Makefile pro.pro
#############################################################################

####### Compiler, tools and options

CC            = cc
CXX           = c++
DEFINES       = -DQT_NO_DEBUG -DQT_SQL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_SHARED
CFLAGS        = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
CXXFLAGS      = -pipe -O2 -fno-strict-aliasing -pipe -Wall -W $(DEFINES)
INCPATH       = -I/usr/local/share/qt4/mkspecs/freebsd-g++ -I. -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtCore -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtGui -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4/QtSql -I/usr/local/include/qt4 -I. -I. -I/usr/local/include
LINK          = c++
LFLAGS        = -pthread -Wl,-rpath,/usr/local/lib/qt4
LIBS          = $(SUBLIBS)  -L/usr/local/lib -L/usr/local/lib/qt4 -lQtSql -L/usr/local/lib/qt4 -L/usr/local/lib -pthread -pthread -lQtGui -pthread -lpng -lSM -lICE -pthread -pthread -lXi -lXrender -lXrandr -lfreetype -lfontconfig -lXext -lX11 -lQtCore -lz -lm -pthread -lgthread-2.0 -lglib-2.0 -liconv
AR            = ar cqs
RANLIB        =
QMAKE         = /usr/local/bin/qmake-qt4
TAR           = tar -cf
COMPRESS      = gzip -9f
COPY          = cp -f
SED           = sed
COPY_FILE     = $(COPY)
COPY_DIR      = $(COPY) -R
INSTALL_FILE  = $(COPY_FILE)
INSTALL_DIR   = $(COPY_DIR)
INSTALL_PROGRAM = $(COPY_FILE)
DEL_FILE      = rm -f
SYMLINK       = ln -sf
DEL_DIR       = rmdir
MOVE          = mv -f
CHK_DIR_EXISTS= test -d
MKDIR         = mkdir -p

####### Output directory

OBJECTS_DIR   = ./

####### Files

SOURCES       = main.cpp
OBJECTS       = main.o
DIST          = /usr/local/share/qt4/mkspecs/common/unix.conf \
                /usr/local/share/qt4/mkspecs/qconfig.pri \
                /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                /usr/local/share/qt4/mkspecs/features/release.prf \
                /usr/local/share/qt4/mkspecs/features/default_post.prf \
                /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                /usr/local/share/qt4/mkspecs/features/qt.prf \
                /usr/local/share/qt4/mkspecs/features/moc.prf \
                /usr/local/share/qt4/mkspecs/features/resources.prf \
                /usr/local/share/qt4/mkspecs/features/uic.prf \
                /usr/local/share/qt4/mkspecs/features/yacc.prf \
                /usr/local/share/qt4/mkspecs/features/lex.prf \
                pro.pro
QMAKE_TARGET  = freenibs-start
DESTDIR       =
TARGET        = freenibs-start

first: all
####### Implicit rules

.SUFFIXES: .o .c .cpp .cc .cxx .C

.cpp.o:
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$&lt;"

.cc.o:
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$&lt;"

.cxx.o:
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$&lt;"

.C.o:
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o "$@" "$&lt;"

.c.o:
        $(CC) -c $(CFLAGS) $(INCPATH) -o "$@" "$&lt;"

####### Build rules

all: Makefile $(TARGET)

$(TARGET):  $(OBJECTS)
        $(LINK) $(LFLAGS) -o $(TARGET) $(OBJECTS) $(OBJCOMP) $(LIBS)

Makefile: pro.pro  /usr/local/share/qt4/mkspecs/freebsd-g++/qmake.conf /usr/local/share/qt4/mkspecs/common/unix.conf \
                /usr/local/share/qt4/mkspecs/qconfig.pri \
                /usr/local/share/qt4/mkspecs/features/qt_functions.prf \
                /usr/local/share/qt4/mkspecs/features/qt_config.prf \
                /usr/local/share/qt4/mkspecs/features/exclusive_builds.prf \
                /usr/local/share/qt4/mkspecs/features/default_pre.prf \
                /usr/local/share/qt4/mkspecs/features/release.prf \
                /usr/local/share/qt4/mkspecs/features/default_post.prf \
                /usr/local/share/qt4/mkspecs/features/unix/thread.prf \
                /usr/local/share/qt4/mkspecs/features/warn_on.prf \
                /usr/local/share/qt4/mkspecs/features/qt.prf \
                /usr/local/share/qt4/mkspecs/features/moc.prf \
                /usr/local/share/qt4/mkspecs/features/resources.prf \
                /usr/local/share/qt4/mkspecs/features/uic.prf \
                /usr/local/share/qt4/mkspecs/features/yacc.prf \
                /usr/local/share/qt4/mkspecs/features/lex.prf \
                /usr/local/lib/qt4/libQtSql.prl \
                /usr/local/lib/qt4/libQtCore.prl \
                /usr/local/lib/qt4/libQtGui.prl
        $(QMAKE) -unix -o Makefile pro.pro
/usr/local/share/qt4/mkspecs/common/unix.conf:
/usr/local/share/qt4/mkspecs/qconfig.pri:
/usr/local/share/qt4/mkspecs/features/qt_functions.prf:
/usr/local/share/qt4/mkspecs/features/qt_config.prf:
/usr/local/share/qt4/mkspecs/features/exclusive_builds.prf:
/usr/local/share/qt4/mkspecs/features/default_pre.prf:
/usr/local/share/qt4/mkspecs/features/release.prf:
/usr/local/share/qt4/mkspecs/features/default_post.prf:
/usr/local/share/qt4/mkspecs/features/unix/thread.prf:
/usr/local/share/qt4/mkspecs/features/warn_on.prf:
/usr/local/share/qt4/mkspecs/features/qt.prf:
/usr/local/share/qt4/mkspecs/features/moc.prf:
/usr/local/share/qt4/mkspecs/features/resources.prf:
/usr/local/share/qt4/mkspecs/features/uic.prf:
/usr/local/share/qt4/mkspecs/features/yacc.prf:
/usr/local/share/qt4/mkspecs/features/lex.prf:
/usr/local/lib/qt4/libQtSql.prl:
/usr/local/lib/qt4/libQtCore.prl:
/usr/local/lib/qt4/libQtGui.prl:
qmake:  FORCE
        @$(QMAKE) -unix -o Makefile pro.pro

dist:
        @$(CHK_DIR_EXISTS) .tmp/freenibs-start1.0.0 || $(MKDIR) .tmp/freenibs-start1.0.0
        $(COPY_FILE) --parents $(SOURCES) $(DIST) .tmp/freenibs-start1.0.0/ &#038;&#038; $(COPY_FILE) --parents main.cpp .tmp/freenibs-start1.0.0/ &#038;&#038; (cd `dirname .tmp/freenibs-start1.0.0` &#038;&#038; $(TAR) freenibs-start1.0.0.tar freenibs-start1.0.0 &#038;&#038; $(COMPRESS) freenibs-start1.0.0.tar) &#038;&#038; $(MOVE) `dirname .tmp/freenibs-start1.0.0`/freenibs-start1.0.0.tar.gz . &#038;&#038; $(DEL_FILE) -r .tmp/freenibs-start1.0.0


clean:compiler_clean
        -$(DEL_FILE) $(OBJECTS)
        -$(DEL_FILE) *~ core *.core


####### Sub-libraries

distclean: clean
        -$(DEL_FILE) $(TARGET)
        -$(DEL_FILE) Makefile


mocclean: compiler_moc_header_clean compiler_moc_source_clean

mocables: compiler_moc_header_make_all compiler_moc_source_make_all

compiler_moc_header_make_all:
compiler_moc_header_clean:
compiler_rcc_make_all:
compiler_rcc_clean:
compiler_image_collection_make_all: qmake_image_collection.cpp
compiler_image_collection_clean:
        -$(DEL_FILE) qmake_image_collection.cpp
compiler_moc_source_make_all:
compiler_moc_source_clean:
compiler_uic_make_all:
compiler_uic_clean:
compiler_yacc_decl_make_all:
compiler_yacc_decl_clean:
compiler_yacc_impl_make_all:
compiler_yacc_impl_clean:
compiler_lex_make_all:
compiler_lex_clean:
compiler_clean:

####### Compile

main.o: main.cpp
        $(CXX) -c $(CXXFLAGS) $(INCPATH) -o main.o main.cpp

####### Install

install:   FORCE

uninstall:   FORCE

FORCE:


</pre>